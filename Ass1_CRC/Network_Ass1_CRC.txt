#include <iostream>
#include <fstream>
#include <string>

using namespace std;

string XOR(string x,string y) 
{
	string result="";
	if (x.length() == y.length())
	{
	  for (int i=0; i < x.length();i++)
	  {
		  if(x[i]==y[i])
		  { result += '0'; }
		  else
		  { result += '1'; }
	  }
	}
	return result;
}


string Alter( string msg ,  int bit_no )
 {
	 if( bit_no <= msg.length() )
	 {
	   msg[bit_no-1] ^= 1;
	   return msg;
	 }
 }


string Generator_Fn (ifstream  &Input_File , ofstream & OutPut_File ,string &Generator)
{
	string msg ;
	getline(Input_File,msg) ;
	getline(Input_File,Generator);
	Input_File.close();

	string msg_f = msg ;
	string CRC ; string temp ; string ZeroG ="" ;

	for (int i = 0 ; i < Generator.length() - 1 ; i++)
	{
		msg += "0";
		temp += msg[i];
		ZeroG += "0";
	}
	ZeroG += "0";

	for (int i = Generator.length() - 1 ; i < msg.length() ; i++)
	{
		 temp += msg[i];
		 
		 if (temp[0] == '1')
		 {	
			 //divide by generator 
			 string result = XOR(temp,Generator);
			 temp = "";
			 for (int x = 1 ; x < Generator.length() ; x++)
			 { temp += result[x]; } 	
		 }

		 else if (temp[0] == '0')
		 {
			 //divide by Zeros 
			 string result = XOR(temp,ZeroG);
			 temp = "";
			 for (int x = 1 ; x < Generator.length() ; x++)
			 { temp += result[x]; } 		 
		 } 
	}
	
	CRC = temp;
	OutPut_File << msg_f + CRC;
	OutPut_File.close();
	return msg_f + CRC;
}
